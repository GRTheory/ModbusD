## DL/T645 Standard

### 简介

DL/T645是中华人民共和国电力行业标准，也称为《多功能电能表通信协议》。该标准规定了多功能电能表（智能电表）与上位机（如集中管理系统）之间的通信协议，包括物理层、数据链路层、应用层等内容，旨在保证智能电表与上位机之间的可靠通信，满足电力行业的自动化、信息化和智能化要求。DL/T645标准已经历数次修订，目前最新版本为DL/T645-2018。

### 与modbus协议的联系

DL/T645协议和Modbus协议都是用于智能电表与上位机之间的通信协议，但是它们是不同的协议。

Modbus协议是一种广泛使用的通信协议，用于连接工业自动化设备，包括传感器、控制器和其他设备。它是一种简单、开放、广泛支持的通信协议，支持多种物理层和数据链路层协议。

而DL/T645协议是专门为电力行业设计的协议，用于智能电表和上位机之间的通信，它规定了特定的物理层、数据链路层和应用层协议。DL/T645协议中定义了多种数据帧格式，包括查询帧、应答帧和异常帧等，可以满足电力行业中电能计量、电费计算、远程抄表等应用需求。

虽然这两种协议不同，但是Modbus协议也可以用于智能电表和上位机之间的通信，只需要对Modbus协议进行适当的扩展和定制。例如，可以定义Modbus寄存器映射到电表的各种参数和数据，然后使用Modbus读取和写入这些寄存器以实现数据交换。

### 与modbus协议的差别

下面是一些具体的例子，用于说明DL/T645协议和Modbus协议的差别：

1. 数据帧格式不同

DL/T645协议中定义了多种数据帧格式，包括查询帧、应答帧和异常帧等。例如，查询帧的格式为：起始符、地址码、控制码、数据长度、数据标识、校验码、结束符。

Modbus协议中定义了两种数据帧格式，分别是RTU（远程终端单元）格式和ASCII格式。例如，RTU格式的数据帧包含地址码、功能码、数据、CRC校验等字段。

1. 支持的功能码不同

DL/T645协议定义了多种功能码，用于读取电能计量数据、设置电表参数、控制电表继电器等操作。

Modbus协议也定义了多种功能码，包括读取线圈状态、读取离散输入状态、读取保持寄存器等操作。Modbus还支持扩展功能码，用于更复杂的数据交换操作。

1. 应用领域不同

DL/T645协议主要应用于电力行业中的智能电表和上位机之间的通信，用于电能计量、电费计算、远程抄表等应用。

Modbus协议广泛应用于工业自动化领域，用于连接传感器、控制器、执行器等设备，实现数据采集、控制和监控等功能。

1. 发展历史不同

DL/T645协议是中国电力行业标准，由中国电力行业标准化技术委员会制定和管理，与中国电力行业的实际需求密切相关。

Modbus协议则是由美国Modicon公司在上世纪70年代提出的，是工业自动化领域最早使用的通信协议之一，后来成为了工业自动化领域的国际标准。